const int led1 = 13;
const int led2 = 12;
const int led3 = 14;
const int led4 = 27;

const int trig1 = 26;
const int trig2 = 33;
const int trig3 = 35;
const int trig4 = 23;

const int echo1 = 25;
const int echo2 = 32;
const int echo3 = 34;
const int echo4 = 22;

const float distanciaLimite = 50.0;

void setup() {
  Serial.begin(115200);

  pinMode(led1, OUTPUT);
  digitalWrite(led1, LOW);
  pinMode(trig1, OUTPUT);
  pinMode(echo1, INPUT);

  pinMode(led2, OUTPUT);
  digitalWrite(led2, LOW);
  pinMode(trig2, OUTPUT);
  pinMode(echo2, INPUT);

  pinMode(led3, OUTPUT);
  digitalWrite(led3, LOW);
  pinMode(trig3, OUTPUT);
  pinMode(echo3, INPUT);

  pinMode(led4, OUTPUT);
  digitalWrite(led4, LOW);
  pinMode(trig4, OUTPUT);
  pinMode(echo4, INPUT);
}

float medirDistancia(int trigPin, int echoPin) {
  digitalWrite(trigPin, LOW);
  delayMicroseconds(2);
  digitalWrite(trigPin, HIGH);
  delayMicroseconds(10);
  digitalWrite(trigPin, LOW);

  long duracao = pulseIn(echoPin, HIGH, 30000);
  if (duracao == 0) return -1.0;
  float distancia = duracao * 0.034 / 2;
  return distancia;
}

void loop() {
  int sensoresAtivados = 0;
  int sensoresDesativados = 0;

  float distancia1 = medirDistancia(trig1, echo1);
  if (distancia1 > 0 && distancia1 < distanciaLimite) {
    digitalWrite(led1, HIGH);
    sensoresAtivados++;
  } else {
    digitalWrite(led1, LOW);
    sensoresDesativados++;
  }
  Serial.print("Sensor 1: ");
  Serial.print(distancia1);
  Serial.println(" cm");

  float distancia2 = medirDistancia(trig2, echo2);
  if (distancia2 > 0 && distancia2 < distanciaLimite) {
    digitalWrite(led2, HIGH);
    sensoresAtivados++;
  } else {
    digitalWrite(led2, LOW);
    sensoresDesativados++;
  }
  Serial.print("Sensor 2: ");
  Serial.print(distancia2);
  Serial.println(" cm");

  float distancia3 = medirDistancia(trig3, echo3);
  if (distancia3 > 0 && distancia3 < distanciaLimite) {
    digitalWrite(led3, HIGH);
    sensoresAtivados++;
  } else {
    digitalWrite(led3, LOW);
    sensoresDesativados++;
  }
  Serial.print("Sensor 3: ");
  Serial.print(distancia3);
  Serial.println(" cm");

  float distancia4 = medirDistancia(trig4, echo4);
  if (distancia4 > 0 && distancia4 < distanciaLimite) {
    digitalWrite(led4, HIGH);
    sensoresAtivados++;
  } else {
    digitalWrite(led4, LOW);
    sensoresDesativados++;
  }
  Serial.print("Sensor 4: ");
  Serial.print(distancia4);
  Serial.println(" cm");

  Serial.print("Total Livres: ");
  Serial.println(sensoresDesativados);
  Serial.print("Total Ocupados: ");
  Serial.println(sensoresAtivados);
  Serial.println("------------------------");

  delay(2000);
}
